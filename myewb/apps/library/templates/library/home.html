{% extends "library/base.html" %}

{% block body_content %}
    <h2>Search the Library</h2>
    {% with 'true' as compact_search %}
    {% include 'library/search_form.html' %}
    {% endwith %}
    
    <h2>Browse the Library</h2>
    
    {% for c in browse %}
        <div style='border: 1px solid #db7403; background: #f8efda; width: 260px; margin-right: 15px; margin-bottom: 15px; padding: 5px; float: left; {% cycle 'clear: left;' ''%}'>
            <a href="{% url library_collection c.id c.slug %}" style='float: right; padding-right: 5px;'>see all &raquo;</a>

            <strong>{{ c.name }}</strong>
            <br/><br/>

            {% for child in c.featured_children %}
                <a href="{% url library_collection child.id child.slug %}">{{ child.name }}</a><br/>
            {% endfor %}
        </div>
    {% endfor %}
    
    <br style='clear: left;'/>
    <hr/>

    <div class='linklist'>
        <h2>Popular resources</h2>

        {% for r in popular %}
            <p><a href="{% url library_resource r.id %}">{{ r.name }}</a></p>
        {% endfor %}
    </div>
    
    <div class='linklist'>
        <h2>Latest additions</h2>

        {% for r in latest %}
            <p><a href="{% url library_resource r.id %}">{{ r.name }}</a></p>
        {% endfor %}
    </div>
    
    

{% endblock %}

{% block toolbar_right %}
    <h1>&nbsp;</h1>
    <h2>&nbsp;</h2>
    
    {% if user.is_authenticated %}
    
    <a href="{% url library_upload %}" style='display: block; border-radius: 0.5em; -moz-border-radius: 0.5em; -webkit-border-radius: 0.5em; background: green; width: 200px; margin: 0 auto; padding: 10px; text-align: center; color: #ffffff;' id="add_resource">
        <span style='font-size: 14px; font-weight: bold; color: #ffffff;'>ADD A NEW<br/>RESOURCE</span>
    </a>
    <div style="background: green; width: 150px; margin: 0 auto; padding: 10px 20px; text-align: right; color: #ffffff; position: relative; top: -0.5em; left: 15px; line-height: 1.5em; display: none;" id="add_resource_more">
        <a href="{% url library_upload %}">Upload a file &raquo;</a><br/>
        <a href="{% url library_upload_link %}">Add a link &raquo;</a>
    </div>
    <br/>
    
    <a href="{% url library_mine %}" style='display: block; border-radius: 0.5em; -moz-border-radius: 0.5em; -webkit-border-radius: 0.5em; background: green; width: 200px; padding: 10px; margin: 0 auto; text-align: center; color: #ffffff;'>
        <span style='font-size: 14px; font-weight: bold; color: #ffffff;'>MY RESOURCES</span>
    </a>
    <br/><br/>
    
    <hr/>
    <h2>Collections</h2>

    <div style='position: relative; top: -15px; line-height: 1.5em;'>
        <div style='padding-bottom: 5px; padding-left: 25px;'>
            <a href="{% url library_collection_create %}">create a collection</a>
        </div>
        
        {% for c in collections %}
            <a href="{% url library_collection c.id c.slug %}">{{ c.name }}</a>
            &nbsp;
            <span style='color: #808080;'>( {{ c.get_total_resources }} )</span><br/>
        {% endfor %}
    </div>

    {% endif %}

{% endblock %}

{% block extra_body %}
    <script type='text/javascript'>
        $().ready(function() {
            $('#add_resource').click(function() {
                $('#add_resource_more').slideToggle();
                return false;
            });
        });
    </script>
{% endblock %}
